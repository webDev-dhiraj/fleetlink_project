{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\my\\\\Downloads\\\\fleetlink_project\\\\frontend\\\\src\\\\components\\\\SearchBook.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport API from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchBook() {\n  _s();\n  const [query, setQuery] = useState({\n    capacityRequired: '',\n    fromPincode: '',\n    toPincode: '',\n    startTime: ''\n  });\n  const [results, setResults] = useState([]);\n  const [message, setMessage] = useState('');\n  const handleChange = e => setQuery({\n    ...query,\n    [e.target.name]: e.target.value\n  });\n  const handleSearch = async () => {\n    try {\n      const res = await API.get('/vehicles/available', {\n        params: query\n      });\n      setResults(res.data);\n      setMessage('');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage('Error: ' + ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error));\n    }\n  };\n  const handleBook = async vehicleId => {\n    try {\n      const payload = {\n        ...query,\n        vehicleId,\n        customerId: 'cust123'\n      };\n      const res = await API.post('/bookings', payload);\n      console.log(\"search:\", res.data);\n      setMessage('Booking confirmed: ' + res.data._id);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setMessage('Error: ' + ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Search & Book\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"capacityRequired\",\n      placeholder: \"Capacity Required\",\n      value: query.capacityRequired,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"fromPincode\",\n      placeholder: \"From Pincode\",\n      value: query.fromPincode,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"toPincode\",\n      placeholder: \"To Pincode\",\n      value: query.toPincode,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"startTime\",\n      type: \"datetime-local\",\n      value: query.startTime,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSearch,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), results.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [r.name, \" - \", r.capacityKg, \"kg - \", r.tyres, \" tyres - \", r.estimatedRideDurationHours, \"h\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleBook(r._id),\n        children: \"Book Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)]\n    }, r._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchBook, \"Dng67iwZxIGGLmOh5etZ7TuhcWE=\");\n_c = SearchBook;\nvar _c;\n$RefreshReg$(_c, \"SearchBook\");","map":{"version":3,"names":["React","useState","API","jsxDEV","_jsxDEV","SearchBook","_s","query","setQuery","capacityRequired","fromPincode","toPincode","startTime","results","setResults","message","setMessage","handleChange","e","target","name","value","handleSearch","res","get","params","data","err","_err$response","_err$response$data","response","error","handleBook","vehicleId","payload","customerId","post","console","log","_id","_err$response2","_err$response2$data","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","type","onClick","map","r","capacityKg","tyres","estimatedRideDurationHours","_c","$RefreshReg$"],"sources":["C:/Users/my/Downloads/fleetlink_project/frontend/src/components/SearchBook.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport API from '../api';\n\nexport default function SearchBook() {\n  const [query, setQuery] = useState({ capacityRequired: '', fromPincode: '', toPincode: '', startTime: '' });\n  const [results, setResults] = useState([]);\n  const [message, setMessage] = useState('');\n\n  const handleChange = e => setQuery({ ...query, [e.target.name]: e.target.value });\n\n  const handleSearch = async () => {\n    try {\n      const res = await API.get('/vehicles/available', { params: query });\n      setResults(res.data);\n      setMessage('');\n    } catch (err) {\n      setMessage('Error: ' + err.response?.data?.error);\n    }\n  };\n\n  const handleBook = async (vehicleId) => {\n    try {\n      const payload = { ...query, vehicleId, customerId: 'cust123' };\n      const res = await API.post('/bookings', payload);\n      console.log(\"search:\", res.data);\n      \n      setMessage('Booking confirmed: ' + res.data._id);\n    } catch (err) {\n      setMessage('Error: ' + err.response?.data?.error);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Search & Book</h2>\n      <input name=\"capacityRequired\" placeholder=\"Capacity Required\" value={query.capacityRequired} onChange={handleChange} />\n      <input name=\"fromPincode\" placeholder=\"From Pincode\" value={query.fromPincode} onChange={handleChange} />\n      <input name=\"toPincode\" placeholder=\"To Pincode\" value={query.toPincode} onChange={handleChange} />\n      <input name=\"startTime\" type=\"datetime-local\" value={query.startTime} onChange={handleChange} />\n      <button onClick={handleSearch}>Search</button>\n\n      {results.map(r => (\n        <div key={r._id}>\n          <p>{r.name} - {r.capacityKg}kg - {r.tyres} tyres - {r.estimatedRideDurationHours}h</p>\n          <button onClick={() => handleBook(r._id)}>Book Now</button>\n        </div>\n      ))}\n\n      <p>{message}</p>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}